# 프론트엔드 기능·데이터 로딩 점검 목록

모든 API 호출 및 데이터 불러오기 영역을 점검한 결과입니다.

---

## 1. API 호출 전체 목록

| API | 사용처 | 응답 형식 | 안전 처리 |
|-----|--------|-----------|-----------|
| `auth.login` | Login | `{ success, token, user, redirectUrl }` | 로그인 실패 시 throw, redirectUrl 없으면 `/dashboard` |
| `auth.me` | AuthContext | `{ user }` | `res?.user` 체크 후 setUser |
| `auth.changePassword` | (미사용) | - | - |
| `requests.dashboard` | Dashboard, AdminDashboard | `{ stats, recent }` | 응답 정규화: stats 객체/ recent 배열만 setState, 렌더 시 `stats?.total ?? 0`, `(Array.isArray(recent)?recent:[]).map` |
| `requests.my` | MyRequests | 배열 | `Array.isArray(res) ? res : []` setList, 렌더 시 배열 보호 |
| `requests.all` | AdminRequests | 배열 | 동일 |
| `requests.get(requestNo)` | RequestDetail | 단일 객체 | `res && typeof res === 'object' ? res : null`, 렌더 시 `request?.필드 ?? '-'` |
| `requests.create` | NewRequest | `{ success, requestNo, isDuplicate, ... }` | success/ isDuplicate 분기, 에러 catch |
| `requests.updateStatus` | MyRequests, AdminRequests | 결과 객체 | catch 후 alert, setList(prev) 시 `(Array.isArray(prev)?prev:[]).map` |
| `codes.regions` | NewRequest | 배열 | `Array.isArray(res) ? res : []` setRegions, 렌더 시 배열 보호 |
| `codes.deliveryPlaces(team)` | NewRequest | 배열 | 동일 setDeliveryPlaces, 배열 보호 |
| `codes.teams` | (미사용) | - | - |

---

## 2. 페이지별 데이터 로딩·표시 점검

| 페이지 | 로딩 데이터 | 로딩/에러 UI | null·비배열 방어 |
|--------|-------------|---------------|------------------|
| **Login** | 없음 (제출 시 auth.login) | error 표시, loading 버튼 | - |
| **Dashboard** | requests.dashboard() | loading/ error/ 빈 recent 메시지 | stats/recent 정규화, map 전 배열 검사 |
| **AdminDashboard** | requests.dashboard() | 동일 | 동일 |
| **NewRequest** | codes.regions(), codes.deliveryPlaces(user.team) | 에러만 (로딩 없음) | regions/deliveryPlaces 배열 보호, user?.team |
| **MyRequests** | requests.my() | loading/ error/ "신청 내역이 없습니다" | list 배열 보호, setList(prev) 시 배열 보호 |
| **AdminRequests** | requests.all() | loading/ error/ "신청이 없습니다" | 동일 |
| **RequestDetail** | requests.get(requestNo) | loading/ error/ "신청 건을 찾을 수 없습니다" | 응답 객체 검사, request?.필드 표시 |
| **Layout** | 없음 (AuthContext user) | - | user?.role, user?.name |
| **AuthContext** | auth.me() (토큰 있을 때) | loading 중 로딩 UI | res?.user 체크 |

---

## 3. 공통·기타

| 항목 | 점검 내용 |
|------|-----------|
| **api()** | !res.ok 시 throw, res.json 실패 시 {} 반환 후 throw 가능성 있음 → 각 .then에서 응답 형식 검사 |
| **getAttachmentUrl** | photoUrl 없으면 '', 절대 URL이면 origin 제거 후 반환 |
| **Router basename** | main.jsx `import.meta.env.BASE_URL` → /consumables/ 배포 시 경로 유지 |
| **404.html** | 빌드 시 복사 → 직접 URL/새로고침 시 SPA 로드 |
| **favicon** | index.html data URI → 404 방지 |

---

## 4. 미사용 API

- `auth.changePassword` — 화면 없음 (필요 시 추후 추가)
- `codes.teams` — 현재 미사용 (필요 시 추후 사용)

위 항목들을 기준으로 **모든 기능 및 데이터 불러오기 영역**을 점검·보강했습니다.
