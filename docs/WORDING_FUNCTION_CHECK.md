# 워딩·기능 일치 점검 (User / Admin 페이지)

각 페이지별로 **화면 워딩(라벨)** 과 **실제 데이터·기능** 이 일치하는지 점검한 결과입니다.

---

## 1. 사용자(User) 페이지

### 1.1 로그인 (`/login`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 사용자 ID | 로그인 시 `userId` (사용자관리 시트 사용자ID) | ✅ |
| 비밀번호 | 로그인 시 `password` 검증 | ✅ |

### 1.2 대시보드 (`/dashboard`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 전체 / 접수중 / 진행중 / 처리완료 / 완료율 | `stats.total`, `stats.requested`, `stats.ordering`, `stats.finished`, 완료율 계산 | ✅ |
| 최근 신청 (신청번호, 품명, 상태, 신청일) | `requestNo`, `itemName`, `status`, `requestDate` | ✅ |

### 1.3 신규 신청 (`/new-request`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 신청자 정보 | 이름·소속팀(파트) 읽기 전용 표시 | ✅ |
| 품명 | `itemName` (부품명) | ✅ |
| 규격 | `modelName` (모델명) | ✅ |
| 수량 | `quantity` | ✅ |
| 관리번호 | `assetNo` | ✅ |
| 시리얼번호 | `serialNo` | ✅ |
| **수령지(배송지)** | `deliveryPlace` — **로그인 사용자 소속팀(파트) 기준**으로 `codes.deliveryPlaces(user.team)` 호출해 목록 표시 | ✅ |
| 전화번호 / 업체명 / 비고 | `phone`, `company`, `remarks` | ✅ |
| 사진 첨부 | `photoBase64` → 사진URL | ✅ |

※ 지역 필드는 제거됨. region은 제출 시 `user.region`으로 백엔드에 전달.

### 1.4 내 신청 목록 (`/my-requests`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 상태 필터 (전체/접수중/진행중/완료/취소) | `statusFilter`: '', '접수중', 'inProgress', '처리완료', '접수취소. '진행중'은 발주진행·발주완료(납기확인/납기미정) 묶음 | ✅ |
| 접수중 / 진행중 / 완료 / 전체 (카드) | `stats.requested`, `stats.inProgress`, `stats.finished`, `stats.total` | ✅ |
| 테이블: 신청번호, 신청일, 품명, 수량, **상태**, 담당자 | `requestNo`, `requestDate`, `itemName`, `quantity`, `status`, `handler` | ✅ |
| 취소 버튼 | 상태 → `접수취소` (접수중일 때만 노출) | ✅ |
| 수령확인 버튼 | 상태 → `처리완료` (발주완료일 때만 노출) | ✅ |

### 1.5 신청 상세 (`/request/:requestNo`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 기본 정보: 신청번호, 신청일시, **상태**, 신청자, **신청자 ID(사번)**, **지역** | `requestNo`, `requestDate`, `status`, `requesterName`, `team`, `requesterEmail`(ID/사번), `region` | ✅ |
| 부품 정보: 품명, 규격/모델명, 수량, 관리번호, 시리얼번호 | `itemName`, `modelName`, `quantity`, `assetNo`, `serialNo` | ✅ |
| 수령 정보: **수령지**, 전화번호, 업체명, 비고 | `deliveryPlace`, `phone`, `company`, `remarks` | ✅ |
| 관리자 액션: **상태**, 담당자 비고 | `adminStatus` → `status`, `adminRemarks` → `handlerRemarks` | ✅ |
| 수령 확인 버튼 | 상태 → `처리완료` (발주완료 시에만 노출) | ✅ |

※ **지역** = 신청 건의 지역 필드, **수령지** = 배송지(수령 장소). 명칭·기능 일치.

### 1.6 내 정보 (`/my-info`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 사용자 ID, 이름, 기사코드, 소속팀, **지역**, 역할 | `userId`, `name`, `employeeCode`, `team`, `region`, `role` (auth/me) | ✅ |
| 비밀번호 변경 | `changePassword` API | ✅ |

※ **지역** = 사용자 프로필의 소속 지역. 주문 상태와 무관.

---

## 2. 관리자(Admin) 페이지

### 2.1 관리자 대시보드 (`/admin`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 조회 기간 (오늘/이번 주/이번 달/직접 선택) | `period`, `startDate`, `endDate` | ✅ |
| 통계 카드 (신규, 접수중, 진행중, 지연, 완료, 전체) | `stats.period` 등 | ✅ |
| 긴급 처리 / 지연 건 | `urgent`, `delayed` | ✅ |

### 2.2 전체 신청 목록 (`/admin/requests`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 조회 조건: **상태** | `statusFilter` → `r.status` 필터 | ✅ |
| 조회 조건: **지역** | `regionFilter` → `r.region` 필터 (신청 건의 지역) | ✅ |
| 시작일/종료일 | `startDate`, `endDate` 필터 | ✅ |
| 테이블: 신청자(이름 + ID), **지역**, 품명, 수량, **상태** | `requesterName`, `requesterEmail`(ID/사번), `region`, `itemName`, `quantity`, `status` | ✅ |
| 발주진행 버튼 | 상태 → `발주진행` (접수중일 때만). **담당자 비고 프롬프트에서 취소 시 상태 변경 없음** | ✅ (수정 반영) |
| 발주완료 버튼 | 상태 → `발주완료(납기확인)` (발주진행일 때만) | ✅ |

※ **지역** = 신청 건의 지역으로 필터/표시. **상태** = 주문(신청) 상태. **신청자 ID(사번)** = 저장값은 ID/사번이며, Excel 헤더·UI는 "신청자ID" / "ID(사번)"로 표기(이메일 아님).

### 2.3 신청 상세 (관리자) — `/request/:requestNo` 내 관리자 액션
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 상태 (드롭다운) | `adminStatus` → `status` 변경 | ✅ |
| 담당자 비고 | `adminRemarks` → `handlerRemarks` | ✅ |

### 2.4 기준정보 등록/관리 (`/admin/master`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 사용자 / 배송지 / CSV 가져오기 등 | 각각 사용자관리, 배송지관리, CSV import | ✅ |

### 2.5 통계 및 리포트 (`/admin/statistics`)
| 워딩 | 데이터/기능 | 일치 |
|------|-------------|------|
| 기간, 통계 카드, 차트 | `requests.dashboard`, `requests.all` 기반 | ✅ |

---

## 3. 수정·보완 사항 요약

### 3.1 버그 수정 (반영 완료)
- **발주 진행 → 취소 시 발주완료로 바뀌던 문제**  
  - **원인**: 담당자 비고 `window.prompt`에서 취소(null)해도 `updateStatus`가 호출됨.  
  - **조치**: 비고가 필요한 경우(발주진행·발주완료 등) 프롬프트에서 **취소(null) 시 `updateStatus` 호출하지 않고 return** 하도록 수정 (`AdminRequests.jsx`).

### 3.2 명세 보완 (반영 완료)
- **신청 상세 기본 정보**  
  - MENU_FUNCTIONS 명세상 "신청자 정보 (이름, 소속팀, 지역)"에 맞춰 **지역**(`request.region`) 표시 추가 (`RequestDetail.jsx`).

### 3.3 신규 신청: 지역 제거, 배송지=소속팀 기준 (반영 완료)
- **요구**: 지역 입력은 불필요. 배송지는 **로그인 사용자 소속팀(파트)** 기준으로 그룹핑해 표시.
- **조치**  
  - **지역**: 신규 신청 폼에서 **지역 입력 제거**. 제출 시 `user.region`만 백엔드에 전달.  
  - **신청자 정보**: 이름·소속팀(파트) **읽기 전용** 블록 추가.  
  - **수령지(배송지)**: `codes.deliveryPlaces(user.team)` 호출로 **소속팀 기준** 목록만 표시. 소속팀 없으면 안내 문구 표시.

### 3.4 워딩·기능 매핑 정리
- **지역**  
  - **User**: 신규 신청·내 정보·신청 상세에서 모두 **지역(region)** — 신청자/수령 관련 지역.  
  - **Admin**: 전체 신청 목록에서 **지역** = 신청 건의 `region` 필터·컬럼.  
  - 어디에서도 **주문 상태(status)** 로 쓰이지 않음.  
- **상태**  
  - 접수중, 발주진행, 발주완료(납기확인/납기미정), 처리완료, 접수취소 — 모두 `status` 필드와 일치.

---

## 4. 점검 방법 (추가 확인 시)

1. **지역**이 나오는 화면: 해당 컬럼/필드가 `region`(지역)인지, `deliveryPlace`(수령지)인지 코드에서 한 번 더 확인.
2. **상태**가 나오는 화면: 라벨이 `status` 값(접수중, 발주진행 등) 또는 그 집계(진행중, 완료 등)와 맞는지 확인.
3. 버튼 클릭 시: **취소**는 상태 변경 없음 또는 접수취소만, **확인/저장**만 해당 상태로 변경되는지 확인.

이 문서는 위와 같이 점검한 결과를 정리한 것입니다. 기능이나 명세가 바뀌면 이 표를 함께 갱신하는 것을 권장합니다.
